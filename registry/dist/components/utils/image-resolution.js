!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["utils/image-resolution"]=e():t["utils/image-resolution"]=e()}(self,(function(){return function(){"use strict";var t,e,o={736:function(t,e,o){o.r(e),e.default='// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require("../../../../../node_modules/css-loader/dist/runtime/api.js");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ".favInfo-box .collection-cover img,\\n.favInfo-box .favInfo-cover img {\\n  width: 100% !important;\\n  -o-object-position: left !important;\\n     object-position: left !important;\\n}\\n\\n.bb-comment .sailing .sailing-img,\\n.comment-bilibili-fold .sailing .sailing-img {\\n  width: 288px;\\n}", ""]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n'},156:function(t){t.exports=coreApis.observer}},n={};function r(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={exports:{}};return o[t](i,i.exports,r),i.exports}e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},r.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if("object"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&"function"==typeof o.then)return o}var i=Object.create(null);r.r(i);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&n&&o;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){a[t]=function(){return o[t]}}));return a.default=function(){return o},r.d(i,a),i},r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return function(){r.d(i,{component:function(){return u}});var t=coreApis.componentApis.styledComponent;const e=/@(\d+)[Ww]_(\d+)[Hh]/,o=["#certify-img1","#certify-img2"],n=(t,e)=>{const o=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT);let n=o.nextNode();for(;n;)e(n),n=o.nextNode()},a=async(t,n)=>{const{attributes:i}=await Promise.resolve().then(r.t.bind(r,156,23)),a=(r,i)=>{const a=r(n);if(null===a)return;if(o.some((t=>n.matches(t))))return;const s=a.match(e);if(!s)return;const[,u,c]=s,l=parseInt(n.getAttribute("data-resolution-width")||"0");if(parseInt(u)>=l&&0!==l)return;null===n.getAttribute("width")&&null===n.getAttribute("height")&&(n.classList.contains("bili-avatar-img")?n.setAttribute("height",c):n.setAttribute("width",u));const d=Math.round(t*parseInt(u)).toString(),f=Math.round(t*parseInt(c)).toString();n.setAttribute("data-resolution-width",d),i(n,a.replace(e,`@${d}w_${f}h`))};i(n,(()=>{a((t=>t.getAttribute("src")),((t,e)=>t.setAttribute("src",e))),a((t=>t.style.backgroundImage),((t,e)=>t.style.backgroundImage=e))}))},s=(0,t.styledComponentEntry)((()=>Promise.resolve().then(r.bind(r,736))),(async({settings:t})=>{const{allMutations:e}=await Promise.resolve().then(r.t.bind(r,156,23)),o="auto"===t.options.scale?window.devicePixelRatio:parseFloat(t.options.scale);n(document.body,(t=>a(o,t))),e((t=>{t.forEach((t=>t.addedNodes.forEach((t=>{t instanceof HTMLElement&&(a(o,t),"IMG"!==t.nodeName.toUpperCase()&&n(t,(t=>a(o,t))))}))))}))})),u={name:"imageResolution",displayName:"高分辨率图片",tags:[componentsTags.utils],enabledByDefault:window.devicePixelRatio>1,entry:s,description:{"zh-CN":"根据屏幕 DPI 请求更高分辨率的图片, 例如 DPI 缩放 200% 则请求 2 倍的分辨率, 加载时间也会相应变长一些. (也会导致某些浏览器里出现图片闪动, 因为本质上是更换了图片源)"},options:{scale:{displayName:"缩放级别",defaultValue:"auto",hidden:!0}},commitHash:"0a2ab779aac2af6f58d15cee16533dd18200bb62"}}(),i=i.component}()}));