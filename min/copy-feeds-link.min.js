(()=>{return(t,e)=>{(async()=>{const t=["https://t.bilibili.com/","https://space.bilibili.com/","https://live.bilibili.com/"];if(t.every(t=>!document.URL.includes(t))){return}const{forEachFeedsCard:i}=await e.importAsync("feeds-apis");const n=t=>{const e=dq(t.element,".more-panel");if(!e||dq(e,".copy-link")){return}const i=document.createElement("p");i.classList.add("child-button","c-pointer","copy-link");i.textContent="复制链接";const n=[...new Set([...e.children].map(t=>{return t.getAttributeNames().filter(t=>t.startsWith("data-v-"))}).flat())];n.forEach(t=>i.setAttribute(t,""));i.addEventListener("click",()=>{GM_setClipboard(`https://t.bilibili.com/${t.id}`,{mimetype:"text/plain"});t.element.click()});e.appendChild(i)};i({added:n})})()}})();