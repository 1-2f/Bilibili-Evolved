(()=>(e,i)=>{function l(e,i,l){if(i in e){Object.defineProperty(e,i,{value:l,enumerable:true,configurable:true,writable:true})}else{e[i]=l}return e}class r{constructor(){l(this,"query",void 0)}async widescreen(){const e=await this.query.control.buttons.widescreen();e===null||e===void 0?void 0:e.click()}async webFullscreen(){const e=await this.query.control.buttons.webFullscreen();e===null||e===void 0?void 0:e.click()}async fullscreen(){const e=await this.query.control.buttons.fullscreen();e===null||e===void 0?void 0:e.click()}}const t=e=>()=>SpinQuery.select(e);const a=e=>{const i=e=>{if(typeof e!=="string"){return _.mapValues(e,i)}return t(e)};return _.mapValues(e,i)};class o extends r{constructor(...e){super(...e);l(this,"query",a({playerWrap:".player-wrap",bilibiliPlayer:".bilibili-player",playerArea:".bilibili-player-area",video:{element:"video",wrap:".bilibili-player-video-wrap",top:".bilibili-player-top",state:".bilibili-player-state",panel:".bilibili-player-video-panel",popup:".bilibili-player-video-popup",subtitle:".bilibili-player-video-subtitle",basDanmaku:".bilibili-player-bas-danmaku",advDanmaku:".bilibili-player-adv-danmaku",danmaku:".bilibili-player-danmaku",container:".bilibili-player-video"},control:{element:".bilibili-player-control",wrap:".bilibili-player-control-wrap",mask:".bilibili-player-control-mask",top:".bilibili-player-control-top",progress:".bilibili-player-video-progress",bottom:".bilibili-player-control-bottom",bottomLeft:".bilibili-player-control-bottom-left",bottomCenter:".bilibili-player-control-bottom-center",bottomRight:".bilibili-player-control-bottom-right",buttons:{start:".bilibili-player-btn-start",next:".bilibili-player-video-btn-next",time:".bilibili-player-video-time",quality:".bilibili-player-btn-quality",pageList:".bilibili-player-video-btn-pagelist",speed:".bilibili-player-video-btn-speed",subtitle:".bilibili-player-video-btn-subtitle",volume:".bilibili-player-video-btn-volume",settings:".bilibili-player-video-btn-setting",pip:".bilibili-player-video-btn-pip",widescreen:".bilibili-player-video-btn-widescreen",webFullscreen:".bilibili-player-video-btn-web-fullscreen",fullscreen:".bilibili-player-video-btn-fullscreen"}},toastWrap:".bilibili-player-video-toast-wrp",danmakuTipLayer:".bilibili-player-dm-tip-wrap"}))}}class p extends o{constructor(){super();this.query.video.element=t("bwp-video")}}class b extends r{constructor(...e){super(...e);l(this,"query",a({playerWrap:".player-module",bilibiliPlayer:".bpx-player-container",playerArea:".bpx-player-primary-area",video:{element:"video",wrap:".bpx-player-video-area",top:".bpx-player-top-wrap",state:".bpx-player-state-wrap",panel:".bpx-player-ending-panel",popup:".bpx-player-dialog-wrap",subtitle:".bpx-player-subtitle-wrap",basDanmaku:".bpx-player-bas-dm-wrap",advDanmaku:".bpx-player-adv-dm-wrap",danmaku:".bpx-player-row-dm-wrap",container:".bpx-player-video-wrap"},control:{element:".squirtle-controller",wrap:".bpx-player-control-wrap",mask:".bpx-player-control-mask",top:".bpx-player-control-top",progress:".squirtle-progress-wrap",bottom:".squirtle-controller-wrap",bottomLeft:".squirtle-controller-wrap-left",bottomCenter:".squirtle-controller-wrap-center",bottomRight:".squirtle-controller-wrap-right",buttons:{start:".squirtle-video-start",next:".squirtle-video-next",time:".squirtle-video-time",quality:".squirtle-video-quality",pageList:".squirtle-video-pagelist",speed:".squirtle-video-speed",subtitle:".squirtle-video-subtitle",volume:".squirtle-video-volume",settings:".squirtle-video-setting",pip:".squirtle-video-pip",widescreen:".squirtle-video-widescreen",webFullscreen:".squirtle-video-pagefullscreen",fullscreen:".squirtle-video-fullscreen"}},toastWrap:".bpx-player-tooltip-area",danmakuTipLayer:".bpx-player-dialog-wrap"}))}}const n=(()=>{if(document.URL.includes("//www.bilibili.com/bangumi/play")){return new b}if(unsafeWindow.__ENABLE_WASM_PLAYER__){return new p}return new o})();return{export:{VideoPlayerAgent:o,BangumiPlayerAgent:b,BwpPlayerAgent:p,playerAgent:n}}})();