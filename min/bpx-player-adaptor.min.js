(()=>(e,t)=>{const n=async()=>{const e=await SpinQuery.select(".bpx-player-container");if(!e){console.warn("[bpx player polyfill] bpxContainer not found");return}Observer.attributes(e,(()=>{const t=e.getAttribute("data-screen");document.body.classList.toggle("player-mode-webfullscreen",t==="full"||t==="web");document.body.classList.toggle("player-mode-widescreen",t==="wide")}))};const i=async()=>{const e=await SpinQuery.select((()=>unsafeWindow.ep));if(!e){console.warn("[bpx player polyfill] ep not found");return}Object.assign(unsafeWindow,{aid:e.aid.toString(),cid:e.cid.toString(),bvid:e.bvid})};const o=async()=>{if(!document.URL.startsWith("https://www.bilibili.com/bangumi/play/")){return}n();i()};return{export:{bpxPlayerPolyfill:o}}})();